# Optical Character Recognition
![Diagram](data:image/png;base64,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)
## Intoduction 

   Optical character recognition or optical character reader (OCR) is the  conversion of images of typed, handwritten or printed text into machine-encoded text, whether from a scanned document, a photo of a document, a scene-photo (for example the text on signs and billboards in a landscape photo) or from subtitle text superimposed on an image. 


## Getting Started
1. Install all following requirements from requirements.txt:
   ```bash
   #With pip
   pip install -r requirements.txt
   ```
   After this command, keras-ocr, tenserflow, opencv(v4.2.0.34), flask will be installed in your environment 
    
2. Then clone our repository:  
   ```bash
   # Clone git repo
   git clone {} 
   ```
3. To run project, execute following commands in terminal:

   Step 1: Open the server with 
   ```
   python app.py
   ```
   The server is setup on port 5000.

   Step 2: Open the front end page.

   If you want to use python.
   ```
   // python3
   python -m http.server
   // python2
   python -m SimpleHTTPServer
   ```
   If you prefer Node.js
   ```
   npm install serve -g // install serve
   serve // this will open a mini web serve
   // or http-serve
   npm install http-server -g
   http-server
   ```
    
## Project descriptions
   Poject use **keras-ocr, tenserflow, opencv** for creating OCR model and **flask** for creating web-application.

### OCR 
  Optical Character Recognition (OCR) is used to process images or scanned documents to produce raw text or other structured output.
  The first step will be creating the an automatic sequence of steps â€” a OCR pipeline. This pipeline transforms scanned documents into raw text data with OCR.
  OCR pipline consists of two parts **Detector and Recogniser** 
   ```
   ```
### Server part

Since flask is very simple and wroted by python, we build it with only a few lines of code.

This function receive base64 encoded image from front end page, converted it to PIL Image, then do the object detection step.

```
@app.route('/api/', methods=["POST"])
def main_interface():
    response = request.get_json()
    data_str = response['image']
    point = data_str.find(',')
    base64_str = data_str[point:]  # remove unused part like this: "data:image/jpeg;base64,"

    image = base64.b64decode(base64_str)       
    img = Image.open(io.BytesIO(image))

    if(img.mode!='RGB'):
        img = img.convert("RGB")
    
    # convert to numpy array.
    img_arr = np.array(img)

    # do object detection in inference function.
    results = inference(sess, detection_graph, img_arr, conf_thresh=0.5)
    print(results)

    return jsonify(results)
```

### Front end part
In front end page, with the help of  jQuery ajax, we can send the base64 image to backend, wait for the result, then draw the bounding box on the page.

Core code is:
```
// handle image files uploaded by user, send it to server, then draw the result.
function parseFiles(files) {
  const file = files[0];
  const imageType = /image.*/;
  if (file.type.match(imageType)) {
    warning.innerHTML = '';
    const reader = new FileReader();
    reader.readAsDataURL(file);
    reader.onloadend = () => {
      image.src = reader.result;
      // send the img to server
      communicate(reader.result);
    }
  } else {
    setup();
    warning.innerHTML = 'Please drop an image file.';
  }
}
```
## Results 
   Finally, we get a web aplliction where you can upload your images, and then by using OCR get inages with detected and recognised text
   
   
## More examples  
  ![](https://imgur.com/tLlfk1I.png)
  
  ![](https://imgur.com/LN41ooq.png)
  
  ![](https://imgur.com/KbxPIvr.png)
 
## 
## Authors

* **Bolotov Heorgii** - *Initial work* - [BeefMILF](https://github.com/BeefMILF)
* **Moroz Denis** - *Initial work* - [HPMortys](https://github.com/HPMortys)

## License

This project is licensed under the MIT License - see the [LICENSE](https://github.com/BeefMILF/OCR-KPI-PetProject/blob/master/LICENSE) file for details

## References




   
